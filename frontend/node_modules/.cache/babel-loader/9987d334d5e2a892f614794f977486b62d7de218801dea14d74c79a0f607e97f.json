{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{fetchResults}from'../utils/extractor';import DownloadButton from'./common/DownloadButton';import CircularProgress from'@mui/material/CircularProgress';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ResultsPage=()=>{const{jobId}=useParams();const[results,setResults]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[status,setStatus]=useState('In Progress');useEffect(()=>{if(!jobId)return;fetchResults(jobId).then(data=>{setResults(data);setLoading(false);setStatus('Completed');}).catch(err=>{setError('Failed to fetch results.');setLoading(false);setStatus('Error');});},[jobId]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading results...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:error});if(!results||!results.anchor_suggestions)return/*#__PURE__*/_jsx(\"div\",{children:\"No anchor suggestions found.\"});// Group anchor suggestions by target_link\nconst grouped=results.anchor_suggestions.reduce((acc,suggestion)=>{if(!acc[suggestion.target_link])acc[suggestion.target_link]=[];acc[suggestion.target_link].push(suggestion);return acc;},{});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Progress Page\"}),status!=='Completed'&&/*#__PURE__*/_jsx(CircularProgress,{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",status]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),status==='Completed'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Anchor Suggestions\"}),Object.entries(grouped).map((_ref,idx)=>{let[targetLink,suggestions]=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'2em'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Target Link:\"}),\" \",/*#__PURE__*/_jsx(\"a\",{href:targetLink,target:\"_blank\",rel:\"noopener noreferrer\",children:targetLink}),/*#__PURE__*/_jsx(\"ul\",{children:suggestions.map((suggestion,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Anchor Text:\"}),\" \",suggestion.anchor_text,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Anchor Sentence:\"}),\" \",suggestion.anchor_sentence]},i))})]},targetLink);}),/*#__PURE__*/_jsx(DownloadButton,{fileName:\"anchor_suggestions.json\",data:JSON.stringify(results.anchor_suggestions,null,2)})]})]});};export default ResultsPage;","map":{"version":3,"names":["React","useEffect","useState","useParams","fetchResults","DownloadButton","CircularProgress","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResultsPage","jobId","results","setResults","loading","setLoading","error","setError","status","setStatus","then","data","catch","err","children","style","color","anchor_suggestions","grouped","reduce","acc","suggestion","target_link","push","Object","entries","map","_ref","idx","targetLink","suggestions","marginBottom","href","target","rel","i","anchor_text","anchor_sentence","fileName","JSON","stringify"],"sources":["C:/Users/Nikhary/autolinker/frontend/src/components/ResultsPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { fetchResults } from '../utils/extractor';\nimport DownloadButton from './common/DownloadButton';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nconst ResultsPage: React.FC = () => {\n    const { jobId } = useParams<{ jobId: string }>();\n    const [results, setResults] = useState<any>(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [status, setStatus] = useState<string>('In Progress');\n\n    useEffect(() => {\n        if (!jobId) return;\n        fetchResults(jobId)\n            .then(data => {\n                setResults(data);\n                setLoading(false);\n                setStatus('Completed');\n            })\n            .catch(err => {\n                setError('Failed to fetch results.');\n                setLoading(false);\n                setStatus('Error');\n            });\n    }, [jobId]);\n\n    if (loading) return <div>Loading results...</div>;\n    if (error) return <div style={{ color: 'red' }}>{error}</div>;\n    if (!results || !results.anchor_suggestions) return <div>No anchor suggestions found.</div>;\n\n    // Group anchor suggestions by target_link\n    const grouped = results.anchor_suggestions.reduce((acc: any, suggestion: any) => {\n        if (!acc[suggestion.target_link]) acc[suggestion.target_link] = [];\n        acc[suggestion.target_link].push(suggestion);\n        return acc;\n    }, {});\n\n    return (\n        <div>\n            <h1>Progress Page</h1>\n            {status !== 'Completed' && <CircularProgress />}\n            <p>Status: {status}</p>\n            {error && <p style={{ color: 'red' }}>{error}</p>}\n            {status === 'Completed' && (\n                <>\n                    <h1>Anchor Suggestions</h1>\n                    {Object.entries(grouped).map(([targetLink, suggestions], idx) => (\n                        <div key={targetLink} style={{ marginBottom: '2em' }}>\n                            <strong>Target Link:</strong> <a href={targetLink} target=\"_blank\" rel=\"noopener noreferrer\">{targetLink}</a>\n                            <ul>\n                                {(suggestions as any[]).map((suggestion, i) => (\n                                    <li key={i}>\n                                        <strong>Anchor Text:</strong> {suggestion.anchor_text}<br />\n                                        <strong>Anchor Sentence:</strong> {suggestion.anchor_sentence}\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n                    ))}\n                    <DownloadButton fileName=\"anchor_suggestions.json\" data={JSON.stringify(results.anchor_suggestions, null, 2)} />\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default ResultsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}